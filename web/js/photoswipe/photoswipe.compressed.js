!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";var a=function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10),g>=1&&g<8&&(d.isOldIOSPhone=!0))}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var l,m,j=["transform","perspective","animationName"],k=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=k[n];for(var o=0;o<3;o++)l=j[o],m=c+(c?l.charAt(0).toUpperCase()+l.slice(1):l),!d[l]&&m in b&&(d[l]=m);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var f,e=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(f=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+f])return!1}else c["oldIE"+f]=g;a[e]("on"+f,c["oldIE"+f])}else a[e]("on"+f,c)});var f=this,g=25,h=3,i={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(i,d);var k,l,m,n,o,p,t,u,v,x,y,z,A,B,C,G,H,J,K,L,M,N,O,Q,S,T,U,V,W,X,Y,Ja,Ka,Sa,Va,Wa,Xa,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,lb,mb,pb,qb,rb,sb,tb,Kb,j=function(){return{x:0,y:0}},q=j(),r=j(),s=j(),w={},D=0,E={},F=j(),I=0,P=!0,R=[],Z={},$=!1,_=function(a,b){e.extend(f,b.publicMethods),R.push(a)},aa=function(a){var b=dc();return a>b-1?a-b:a<0?b+a:a},ba={},ca=function(a,b){return ba[a]||(ba[a]=[]),ba[a].push(b)},da=function(a){var b=ba[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},ea=function(){return(new Date).getTime()},fa=function(a){sb=a,f.bg.style.opacity=a*i.bgOpacity},ga=function(a,b,c,d,e){(!$||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[N]=z+b+"px, "+c+"px"+A+" scale("+d+")"},ha=function(a){lb&&(a&&(x>f.currItem.fitRatio?$||(lc(f.currItem,!1,!0),$=!0):$&&(lc(f.currItem),$=!1)),ga(lb,s.x,s.y,x))},ia=function(a){a.container&&ga(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},ja=function(a,b){b[N]=z+a+"px, 0px"+A},ka=function(a,b){if(!i.loop&&b){var c=n+(F.x*D-a)/F.x,d=Math.round(a-kb.x);(c<0&&d>0||c>=dc()-1&&d<0)&&(a=kb.x+d*i.mainScrollEndFriction)}kb.x=a,ja(a,o)},la=function(a,b){var c=nb[a]-E[a];return r[a]+q[a]+c-c*(b/y)},ma=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},na=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},oa=null,pa=function(){oa&&(e.unbind(document,"mousemove",pa),e.addClass(a,"pswp--has_mouse"),i.mouseUsed=!0,da("mouseUsed")),oa=setTimeout(function(){oa=null},100)},qa=function(){e.bind(document,"keydown",f),Y.transform&&e.bind(f.scrollWrap,"click",f),i.mouseUsed||e.bind(document,"mousemove",pa),e.bind(window,"resize scroll",f),da("bindEvents")},ra=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",v.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",pa),Y.transform&&e.unbind(f.scrollWrap,"click",f),_a&&e.unbind(window,t,f),da("unbindEvents")},sa=function(a,b){var c=hc(f.currItem,w,a);return b&&(jb=c),c},ta=function(a){return a||(a=f.currItem),a.initialZoomLevel},ua=function(a){return a||(a=f.currItem),a.w>0?i.maxSpreadZoom:1},va=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=la(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},wa=function(){if(N){var b=Y.perspective&&!Q;return z="translate"+(b?"3d(":"("),void(A=Y.perspective?", 0px)":")")}N="left",e.addClass(a,"pswp--ie"),ja=function(a,b){b.left=a+"px"},ia=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},ha=function(){if(lb){var a=lb,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=s.x+"px",a.top=s.y+"px"}}},xa=function(a){var b="";i.escKey&&27===a.keyCode?b="close":i.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},ya=function(a){a&&(cb||bb||mb||Wa)&&(a.preventDefault(),a.stopPropagation())},za=function(){f.setScrollOffset(0,e.getScrollY())},Aa={},Ba=0,Ca=function(a){Aa[a]&&(Aa[a].raf&&T(Aa[a].raf),Ba--,delete Aa[a])},Da=function(a){Aa[a]&&Ca(a),Aa[a]||(Ba++,Aa[a]={})},Ea=function(){for(var a in Aa)Aa.hasOwnProperty(a)&&Ca(a)},Fa=function(a,b,c,d,e,f,g){var i,h=ea();Da(a);var j=function(){if(Aa[a]){if(i=ea()-h,i>=d)return Ca(a),f(c),void(g&&g());f((c-b)*e(i/d)+b),Aa[a].raf=S(j)}};j()},Ga={shout:da,listen:ca,viewportSize:w,options:i,isMainScrollAnimating:function(){return mb},getZoomLevel:function(){return x},getCurrentIndex:function(){return n},isDragging:function(){return _a},isZooming:function(){return gb},setScrollOffset:function(a,b){E.x=a,X=E.y=b,da("updateScrollOffset",E)},applyZoomPan:function(a,b,c,d){s.x=b,s.y=c,x=a,ha(d)},init:function(){if(!k&&!l){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),U=a.className,k=!0,Y=e.detectFeatures(),S=Y.raf,T=Y.caf,N=Y.transform,W=Y.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),o=f.container.style,f.itemHolders=G=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],G[0].el.style.display=G[2].el.style.display="none",wa(),v={resize:f.updateSize,scroll:za,keydown:xa,click:ya};var d=Y.isOldIOSPhone||Y.isOldAndroid||Y.isMobileOpera;for(Y.animationName&&Y.transform&&!d||(i.showAnimationDuration=i.hideAnimationDuration=0),c=0;c<R.length;c++)f["init"+R[c]]();if(b){var g=f.ui=new b(f,e);g.init()}da("firstUpdate"),n=n||i.index||0,(isNaN(n)||n<0||n>=dc())&&(n=0),f.currItem=cc(n),(Y.isOldIOSPhone||Y.isOldAndroid)&&(P=!1),a.setAttribute("aria-hidden","false"),i.modal&&(P?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===X&&(da("initialLayout"),X=V=e.getScrollY());var j="pswp--open ";for(i.mainClass&&(j+=i.mainClass+" "),i.showHideOpacity&&(j+="pswp--animate_opacity "),j+=Q?"pswp--touch":"pswp--notouch",j+=Y.animationName?" pswp--css_animation":"",j+=Y.svg?" pswp--svg":"",e.addClass(a,j),f.updateSize(),p=-1,I=null,c=0;c<h;c++)ja((c+p)*F.x,G[c].el.style);W||e.bind(f.scrollWrap,u,f),ca("initialZoomInEnd",function(){f.setContent(G[0],n-1),f.setContent(G[2],n+1),G[0].el.style.display=G[2].el.style.display="block",i.focus&&a.focus(),qa()}),f.setContent(G[1],n),f.updateCurrItem(),da("afterInit"),P||(B=setInterval(function(){Ba||_a||gb||x!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){k&&(k=!1,l=!0,da("close"),ra(),Xb(f.currItem,null,!0,f.destroy))},destroy:function(){da("destroy"),Wb&&clearTimeout(Wb),a.setAttribute("aria-hidden","true"),a.className=U,B&&clearInterval(B),e.unbind(f.scrollWrap,u,f),e.unbind(window,"scroll",f),xb(),Ea(),ba=null},panTo:function(a,b,c){c||(a>jb.min.x?a=jb.min.x:a<jb.max.x&&(a=jb.max.x),b>jb.min.y?b=jb.min.y:b<jb.max.y&&(b=jb.max.y)),s.x=a,s.y=b,ha()},handleEvent:function(a){a=a||window.event,v[a.type]&&v[a.type](a)},goTo:function(a){a=aa(a);var b=a-n;I=b,n=a,f.currItem=cc(n),D-=b,ka(F.x*D),Ea(),mb=!1,f.updateCurrItem()},next:function(){f.goTo(n+1)},prev:function(){f.goTo(n-1)},updateCurrZoomItem:function(a){if(a&&da("beforeChange",0),G[1].el.children.length){var b=G[1].el.children[0];lb=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else lb=null;jb=f.currItem.bounds,y=x=f.currItem.initialZoomLevel,s.x=jb.center.x,s.y=jb.center.y,a&&da("afterChange")},invalidateCurrItems:function(){C=!0;for(var a=0;a<h;a++)G[a].item&&(G[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==I){var c,b=Math.abs(I);if(!(a&&b<2)){f.currItem=cc(n),$=!1,da("beforeChange",I),b>=h&&(p+=I+(I>0?-h:h),b=h);for(var d=0;d<b;d++)I>0?(c=G.shift(),G[h-1]=c,p++,ja((p+2)*F.x,c.el.style),f.setContent(c,n-b+d+1+1)):(c=G.pop(),G.unshift(c),p--,ja(p*F.x,c.el.style),f.setContent(c,n+b-d-1-1));if(lb&&1===Math.abs(I)){var e=cc(H);e.initialZoomLevel!==x&&(hc(e,w),lc(e),ia(e))}I=0,f.updateCurrZoomItem(),H=n,da("afterChange")}}},updateSize:function(b){if(!P&&i.modal){var c=e.getScrollY();if(X!==c&&(a.style.top=c+"px",X=c),!b&&Z.x===window.innerWidth&&Z.y===window.innerHeight)return;Z.x=window.innerWidth,Z.y=window.innerHeight,a.style.height=Z.y+"px"}if(w.x=f.scrollWrap.clientWidth,w.y=f.scrollWrap.clientHeight,za(),F.x=w.x+Math.round(w.x*i.spacing),F.y=w.y,ka(F.x*D),da("beforeResize"),void 0!==p){for(var d,g,j,k=0;k<h;k++)d=G[k],ja((k+p)*F.x,d.el.style),j=n+k-1,i.loop&&dc()>2&&(j=aa(j)),g=cc(j),g&&(C||g.needsUpdate||!g.bounds)?(f.cleanSlide(g),f.setContent(d,j),1===k&&(f.currItem=g,f.updateCurrZoomItem(!0)),g.needsUpdate=!1):d.index===-1&&j>=0&&f.setContent(d,j),g&&g.container&&(hc(g,w),lc(g),ia(g));C=!1}y=x=f.currItem.initialZoomLevel,jb=f.currItem.bounds,jb&&(s.x=jb.center.x,s.y=jb.center.y,ha(!0)),da("resize")},zoomTo:function(a,b,c,d,f){b&&(y=x,nb.x=Math.abs(b.x)-s.x,nb.y=Math.abs(b.y)-s.y,ma(r,s));var g=sa(a,!1),h={};va("x",g,h,a),va("y",g,h,a);var i=x,j={x:s.x,y:s.y};na(h);var k=function(b){1===b?(x=a,s.x=h.x,s.y=h.y):(x=(a-i)*b+i,s.x=(h.x-j.x)*b+j.x,s.y=(h.y-j.y)*b+j.y),f&&f(b),ha(1===b)};c?Fa("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},Ha=30,Ia=10,La={},Ma={},Na={},Oa={},Pa={},Qa=[],Ra={},Ta=[],Ua={},Ya=0,Za=j(),$a=0,kb=j(),nb=j(),ob=j(),ub=function(a,b){return a.x===b.x&&a.y===b.y},vb=function(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g},wb=function(a,b){return Ua.x=Math.abs(a.x-b.x),Ua.y=Math.abs(a.y-b.y),Math.sqrt(Ua.x*Ua.x+Ua.y*Ua.y)},xb=function(){db&&(T(db),db=null)},yb=function(){_a&&(db=S(yb),Pb())},zb=function(){return!("fit"===i.scaleMode&&x===f.currItem.initialZoomLevel)},Ab=function(a,b){return!(!a||a===document)&&(!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:Ab(a.parentNode,b)))},Bb={},Cb=function(a,b){return Bb.prevent=!Ab(a.target,i.isClickableElement),da("preventDragEvent",a,b,Bb),Bb.prevent},Db=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Eb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Fb=function(a,b,c){if(a-Ka>50){var d=Ta.length>2?Ta.shift():{};d.x=b,d.y=c,Ta.push(d),Ka=a}},Gb=function(){var a=s.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(w.y/2))},Hb={},Ib={},Jb=[],Lb=function(a){for(;Jb.length>0;)Jb.pop();return O?(Kb=0,Qa.forEach(function(a){0===Kb?Jb[0]=a:1===Kb&&(Jb[1]=a),Kb++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Jb[0]=Db(a.touches[0],Hb),a.touches.length>1&&(Jb[1]=Db(a.touches[1],Ib))):(Hb.x=a.pageX,Hb.y=a.pageY,Hb.id="",Jb[0]=Hb),Jb},Mb=function(a,b){var c,g,l,m,d=0,e=s[a]+b[a],h=b[a]>0,j=kb.x+b.x,k=kb.x-Ra.x;return c=e>jb.min[a]||e<jb.max[a]?i.panEndFriction:1,e=s[a]+b[a]*c,!i.allowPanToNext&&x!==f.currItem.initialZoomLevel||(lb?"h"!==pb||"x"!==a||bb||(h?(e>jb.min[a]&&(c=i.panEndFriction,d=jb.min[a]-e,g=jb.min[a]-r[a]),(g<=0||k<0)&&dc()>1?(m=j,k<0&&j>Ra.x&&(m=Ra.x)):jb.min.x!==jb.max.x&&(l=e)):(e<jb.max[a]&&(c=i.panEndFriction,d=e-jb.max[a],g=r[a]-jb.max[a]),(g<=0||k>0)&&dc()>1?(m=j,k>0&&j<Ra.x&&(m=Ra.x)):jb.min.x!==jb.max.x&&(l=e))):m=j,"x"!==a)?void(mb||eb||x>f.currItem.fitRatio&&(s[a]+=b[a]*c)):(void 0!==m&&(ka(m,!0),eb=m!==Ra.x),jb.min.x!==jb.max.x&&(void 0!==l?s.x=l:eb||(s.x+=b.x*c)),void 0!==m)},Nb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(ac)return void a.preventDefault();if(!Xa||"mousedown"!==a.type){if(Cb(a,!0)&&a.preventDefault(),da("pointerDown"),O){var b=e.arraySearch(Qa,a.pointerId,"id");b<0&&(b=Qa.length),Qa[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Lb(a),d=c.length;fb=null,Ea(),_a&&1!==d||(_a=qb=!0,e.bind(window,t,f),Va=tb=rb=Wa=eb=cb=ab=bb=!1,pb=null,da("firstTouchStart",c),ma(r,s),q.x=q.y=0,ma(Oa,c[0]),ma(Pa,Oa),Ra.x=F.x*D,Ta=[{x:Oa.x,y:Oa.y}],Ka=Ja=ea(),sa(x,!0),xb(),yb()),!gb&&d>1&&!mb&&!eb&&(y=x,bb=!1,gb=ab=!0,q.y=q.x=0,ma(r,s),ma(La,c[0]),ma(Ma,c[1]),Eb(La,Ma,ob),nb.x=Math.abs(ob.x)-s.x,nb.y=Math.abs(ob.y)-s.y,hb=ib=wb(La,Ma))}}},Ob=function(a){if(a.preventDefault(),O){var b=e.arraySearch(Qa,a.pointerId,"id");if(b>-1){var c=Qa[b];c.x=a.pageX,c.y=a.pageY}}if(_a){var d=Lb(a);if(pb||cb||gb)fb=d;else if(kb.x!==F.x*D)pb="h";else{var f=Math.abs(d[0].x-Oa.x)-Math.abs(d[0].y-Oa.y);Math.abs(f)>=Ia&&(pb=f>0?"h":"v",fb=d)}}},Pb=function(){if(fb){var a=fb.length;if(0!==a)if(ma(La,fb[0]),Na.x=La.x-Oa.x,Na.y=La.y-Oa.y,gb&&a>1){if(Oa.x=La.x,Oa.y=La.y,!Na.x&&!Na.y&&ub(fb[1],Ma))return;ma(Ma,fb[1]),bb||(bb=!0,da("zoomGestureStarted"));var b=wb(La,Ma),c=Ub(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(tb=!0);var d=1,e=ta(),g=ua();if(c<e)if(i.pinchToClose&&!tb&&y<=f.currItem.initialZoomLevel){var h=e-c,j=1-h/(e/1.2);fa(j),da("onPinchClose",j),rb=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>g&&(d=(c-g)/(6*e),d>1&&(d=1),c=g+d*e);d<0&&(d=0),hb=b,Eb(La,Ma,Za),q.x+=Za.x-ob.x,q.y+=Za.y-ob.y,ma(ob,Za),s.x=la("x",c),s.y=la("y",c),Va=c>x,x=c,ha()}else{if(!pb)return;if(qb&&(qb=!1,Math.abs(Na.x)>=Ia&&(Na.x-=fb[0].x-Pa.x),Math.abs(Na.y)>=Ia&&(Na.y-=fb[0].y-Pa.y)),Oa.x=La.x,Oa.y=La.y,0===Na.x&&0===Na.y)return;if("v"===pb&&i.closeOnVerticalDrag&&!zb()){q.y+=Na.y,s.y+=Na.y;var k=Gb();return Wa=!0,da("onVerticalDrag",k),fa(k),void ha()}Fb(ea(),La.x,La.y),cb=!0,jb=f.currItem.bounds;var l=Mb("x",Na);l||(Mb("y",Na),na(s),ha())}}},Qb=function(a){if(Y.isOldAndroid){if(Xa&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(Xa),Xa=setTimeout(function(){Xa=0},600))}da("pointerUp"),Cb(a,!1)&&a.preventDefault();var b;if(O){var c=e.arraySearch(Qa,a.pointerId,"id");if(c>-1)if(b=Qa.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var h,g=Lb(a),j=g.length;if("mouseup"===a.type&&(j=0),2===j)return fb=null,!0;1===j&&ma(Pa,g[0]),0!==j||pb||mb||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),da("touchRelease",a,b));var k=-1;if(0===j&&(_a=!1,e.unbind(window,t,f),xb(),gb?k=0:$a!==-1&&(k=ea()-$a)),$a=1===j?ea():-1,h=k!==-1&&k<150?"zoom":"swipe",gb&&j<2&&(gb=!1,1===j&&(h="zoomPointerUp"),da("zoomGestureEnded")),fb=null,cb||bb||mb||Wa)if(Ea(),Sa||(Sa=Rb()),Sa.calculateSwipeSpeed("x"),Wa){var l=Gb();if(l<i.verticalDragRange)f.close();else{var m=s.y,n=sb;Fa("verticalDrag",0,1,300,e.easing.cubic.out,function(a){s.y=(f.currItem.initialPosition.y-m)*a+m,fa((1-n)*a+n),ha()}),da("onVerticalDrag",1)}}else{if((eb||mb)&&0===j){var o=Tb(h,Sa);if(o)return;h="zoomPointerUp"}if(!mb)return"swipe"!==h?void Vb():void(!eb&&x>f.currItem.fitRatio&&Sb(Sa))}},Rb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){Ta.length>1?(a=ea()-Ka+50,b=Ta[Ta.length-2][d]):(a=ea()-Ja,b=Pa[d]),c.lastFlickOffset[d]=Oa[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(s[a]>jb.min[a]?c.backAnimDestination[a]=jb.min[a]:s[a]<jb.max[a]&&(c.backAnimDestination[a]=jb.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,Fa("bounceZoomPan"+a,s[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){s[a]=b,ha()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,s[a]+=c.distanceOffset[a])},panAnimLoop:function(){if(Aa.zoomPan&&(Aa.zoomPan.raf=S(c.panAnimLoop),c.now=ea(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),ha(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return s.x=Math.round(s.x),s.y=Math.round(s.y),ha(),void Ca("zoomPan")}};return c},Sb=function(a){return a.calculateSwipeSpeed("y"),jb=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05?(a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0):(Da("zoomPan"),a.lastNow=ea(),void a.panAnimLoop())},Tb=function(a,b){var c;mb||(Ya=n);var d;if("swipe"===a){var g=Oa.x-Pa.x,h=b.lastFlickDist.x<10;g>Ha&&(h||b.lastFlickOffset.x>20)?d=-1:g<-Ha&&(h||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(n+=d,n<0?(n=i.loop?dc()-1:0,j=!0):n>=dc()&&(n=i.loop?0:dc()-1,j=!0),j&&!i.loop||(I+=d,D-=d,c=!0));var m,k=F.x*D,l=Math.abs(k-kb.x);return c||k>kb.x==b.lastFlickSpeed.x>0?(m=Math.abs(b.lastFlickSpeed.x)>0?l/Math.abs(b.lastFlickSpeed.x):333,m=Math.min(m,400),m=Math.max(m,250)):m=333,Ya===n&&(c=!1),mb=!0,da("mainScrollAnimStart"),Fa("mainScroll",kb.x,k,m,e.easing.cubic.out,ka,function(){Ea(),mb=!1,Ya=-1,(c||Ya!==n)&&f.updateCurrItem(),da("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Ub=function(a){return 1/ib*a*y},Vb=function(){var a=x,b=ta(),c=ua();x<b?a=b:x>c&&(a=c);var g,d=1,h=sb;return rb&&!Va&&!tb&&x<b?(f.close(),!0):(rb&&(g=function(a){fa((d-h)*a+h)}),f.zoomTo(a,0,200,e.easing.cubic.out,g),!0)};_("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){J=a+b,K=a+c,L=a+d,M=e?a+e:""};O=Y.pointerEvent,O&&Y.touch&&(Y.touch=!1),O?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):Y.touch?(a("touch","start","move","end","cancel"),Q=!0):a("mouse","down","move","up"),t=K+" "+L+" "+M,u=J,O&&!Q&&(Q=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=Q,v[J]=Nb,v[K]=Ob,v[L]=Qb,M&&(v[M]=v[L]),Y.touch&&(u+=" mousedown",t+=" mousemove mouseup",v.mousedown=v[J],v.mousemove=v[K],v.mouseup=v[L]),Q||(i.allowPanToNext=!1)}}});var Wb,Yb,_b,ac,cc,dc,ec,Xb=function(b,c,d,g){Wb&&clearTimeout(Wb),ac=!0,_b=!0;var h;b.initialLayout?(h=b.initialLayout,b.initialLayout=null):h=i.getThumbBoundsFn&&i.getThumbBoundsFn(n);var j=d?i.hideAnimationDuration:i.showAnimationDuration,k=function(){Ca("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(fa(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),da("initialZoom"+(d?"OutEnd":"InEnd"))),g&&g(),ac=!1};if(!j||!h||void 0===h.x)return da("initialZoom"+(d?"Out":"In")),x=b.initialZoomLevel,ma(s,b.initialPosition),ha(),a.style.opacity=d?0:1,fa(1),void(j?setTimeout(function(){k()},j):k());var l=function(){var c=m,g=!f.currItem.src||f.currItem.loadError||i.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(x=h.w/b.w,s.x=h.x,s.y=h.y-V,f[g?"template":"bg"].style.opacity=.001,ha()),Da("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),g&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),Wb=setTimeout(function(){if(da("initialZoom"+(d?"Out":"In")),d){var f=h.w/b.w,i={x:s.x,y:s.y},l=x,m=sb,n=function(b){1===b?(x=f,s.x=h.x,s.y=h.y-X):(x=(f-l)*b+l,s.x=(h.x-i.x)*b+i.x,s.y=(h.y-X-i.y)*b+i.y),ha(),g?a.style.opacity=1-b:fa(m-b*m)};c?Fa("initialZoom",0,1,j,e.easing.cubic.out,n,k):(n(1),Wb=setTimeout(k,j+20))}else x=b.initialZoomLevel,ma(s,b.initialPosition),ha(),fa(1),g?a.style.opacity=1:fa(1),Wb=setTimeout(k,j+20)},d?25:90)};l()},Zb={},$b=[],bc={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Yb.length}},fc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},gc=function(a,b,c){var d=a.bounds;d.center.x=Math.round((Zb.x-b)/2),d.center.y=Math.round((Zb.y-c)/2)+a.vGap.top,d.max.x=b>Zb.x?Math.round(Zb.x-b):d.center.x,d.max.y=c>Zb.y?Math.round(Zb.y-c)+a.vGap.top:d.center.y,d.min.x=b>Zb.x?0:d.center.x,d.min.y=c>Zb.y?a.vGap.top:d.center.y},hc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),da("parseVerticalMargin",a)),Zb.x=b.x,Zb.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=Zb.x/a.w,f=Zb.y/a.h;a.fitRatio=e<f?e:f;var g=i.scaleMode;"orig"===g?c=1:"fit"===g&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=fc())}if(!c)return;return gc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=fc(),a.initialPosition=a.bounds.center,a.bounds},ic=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,lc(b,d,b===f.currItem&&$),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},jc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},kc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=i.errorMsg.replace("%url%",a.src),!0},lc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},mc=function(){if($b.length){for(var a,b=0;b<$b.length;b++)a=$b[b],a.holder.index===a.index&&ic(a.index,a.item,a.baseDiv,a.img,!1,a.clearPlaceholder);$b=[]}};_("Controller",{publicMethods:{lazyLoadItem:function(a){a=aa(a);var b=cc(a);b&&(!b.loaded&&!b.loading||C)&&(da("gettingData",a,b),b.src&&jc(b))},initController:function(){e.extend(i,bc,!0),f.items=Yb=c,cc=f.getItemAt,dc=i.getNumItemsFn,ec=i.loop,dc()<3&&(i.loop=!1),ca("beforeChange",function(a){var g,b=i.preload,c=null===a||a>=0,d=Math.min(b[0],dc()),e=Math.min(b[1],dc());for(g=1;g<=(c?e:d);g++)f.lazyLoadItem(n+g);for(g=1;g<=(c?d:e);g++)f.lazyLoadItem(n-g)}),ca("initialLayout",function(){f.currItem.initialLayout=i.getThumbBoundsFn&&i.getThumbBoundsFn(n)}),ca("mainScrollAnimComplete",mc),ca("initialZoomInEnd",mc),ca("destroy",function(){for(var a,b=0;b<Yb.length;b++)a=Yb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);$b=null})},getItemAt:function(a){return a>=0&&(void 0!==Yb[a]&&Yb[a])},allowProgressiveImg:function(){return i.forceProgressiveLoading||!Q||i.mouseUsed||screen.width>1200},setContent:function(a,b){i.loop&&(b=aa(b));var c=f.getItemAt(a.index);c&&(c.container=null);var g,d=f.getItemAt(b);if(!d)return void(a.el.innerHTML="");da("gettingData",b,d),a.index=b,a.item=d;var h=d.container=e.createEl("pswp__zoom-wrap");if(!d.src&&d.html&&(d.html.tagName?h.appendChild(d.html):h.innerHTML=d.html),kc(d),hc(d,w),!d.src||d.loadError||d.loaded)d.src&&!d.loadError&&(g=e.createEl("pswp__img","img"),g.style.opacity=1,g.src=d.src,lc(d,g),ic(b,d,h,g,!0));else{if(d.loadComplete=function(c){if(k){if(a&&a.index===b){if(kc(c,!0))return c.loadComplete=c.img=null,hc(c,w),ia(c),void(a.index===n&&f.updateCurrZoomItem());c.imageAppended?!ac&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):Y.transform&&(mb||ac)?$b.push({item:c,baseDiv:h,img:c.img,index:b,holder:a,clearPlaceholder:!0}):ic(b,c,h,c.img,mb||ac,!0)}c.loadComplete=null,c.img=null,da("imageLoadComplete",b,c)}},e.features.transform){var j="pswp__img pswp__img--placeholder";j+=d.msrc?"":" pswp__img--placeholder--blank";var l=e.createEl(j,d.msrc?"img":"");d.msrc&&(l.src=d.msrc),lc(d,l),h.appendChild(l),d.placeholder=l}d.loading||jc(d),f.allowProgressiveImg()&&(!_b&&Y.transform?$b.push({item:d,baseDiv:h,img:d.img,index:b,holder:a}):ic(b,d,h,d.img,!0,!0))}_b||b!==n?ia(d):(lb=h.style,Xb(d,g||d.img)),a.el.innerHTML="",a.el.appendChild(h)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var nc,oc={},pc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};_("Tap",{publicMethods:{initTap:function(){ca("firstTouchStart",f.onTapStart),ca("touchRelease",f.onTapRelease),ca("destroy",function(){oc={},nc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(nc),nc=null)},onTapRelease:function(a,b){if(b&&!cb&&!ab&&!Ba){var c=b;if(nc&&(clearTimeout(nc),nc=null,vb(c,oc)))return void da("doubleTap",c);if("mouse"===b.type)return void pc(a,b,"mouse");var d=a.target.tagName.toUpperCase();if("BUTTON"===d||e.hasClass(a.target,"pswp__single-tap"))return void pc(a,b);ma(oc,c),nc=setTimeout(function(){pc(a,b),nc=null},300)}}}});var qc;_("DesktopZoom",{publicMethods:{initDesktopZoom:function(){W||(Q?ca("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){qc={};var c="wheel mousewheel DOMMouseScroll";ca("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),ca("unbindEvents",function(){qc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),x<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};ca("resize",g),ca("afterChange",g),ca("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),ca("pointerUp",h),b||g()},handleMouseWheel:function(a){if(x<=f.currItem.fitRatio)return i.modal&&(!i.closeOnScroll||Ba||_a?a.preventDefault():N&&Math.abs(a.deltaY)>2&&(m=!0,f.close())),!0;if(a.stopPropagation(),qc.x=0,"deltaX"in a)1===a.deltaMode?(qc.x=18*a.deltaX,qc.y=18*a.deltaY):(qc.x=a.deltaX,qc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(qc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?qc.y=-.16*a.wheelDeltaY:qc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;qc.y=a.detail}sa(x,!0);var b=s.x-qc.x,c=s.y-qc.y;(i.modal||b<=jb.min.x&&b>=jb.max.x&&c<=jb.min.y&&c>=jb.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:w.x/2+E.x,y:w.y/2+E.y};var c=i.getDoubleTapZoom(!0,f.currItem),d=x===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var sc,tc,uc,vc,wc,xc,yc,zc,Ac,Bc,Cc,Dc,rc={history:!0,galleryUID:1},Ec=function(){return Cc.hash.substring(1)},Fc=function(){sc&&clearTimeout(sc),uc&&clearTimeout(uc)},Gc=function(){var a=Ec(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(i.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Yb.length;c++)if(Yb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Hc=function(){if(uc&&clearTimeout(uc),Ba||_a)return void(uc=setTimeout(Hc,500));vc?clearTimeout(tc):vc=!0;var a=n+1,b=cc(n);b.hasOwnProperty("pid")&&(a=b.pid);var c=yc+"&gid="+i.galleryUID+"&pid="+a;zc||Cc.hash.indexOf(c)===-1&&(Bc=!0);var d=Cc.href.split("#")[0]+"#"+c;Dc?"#"+c!==window.location.hash&&history[zc?"replaceState":"pushState"]("",document.title,d):zc?Cc.replace(d):Cc.hash=c,zc=!0,tc=setTimeout(function(){vc=!1},60)};_("History",{publicMethods:{initHistory:function(){if(e.extend(i,rc,!0),i.history){Cc=window.location,Bc=!1,Ac=!1,zc=!1,yc=Ec(),Dc="pushState"in history,yc.indexOf("gid=")>-1&&(yc=yc.split("&gid=")[0],yc=yc.split("?gid=")[0]),ca("afterChange",f.updateURL),ca("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){xc=!0,Ac||(Bc?history.back():yc?Cc.hash=yc:Dc?history.pushState("",document.title,Cc.pathname+Cc.search):Cc.hash=""),Fc()};ca("unbindEvents",function(){m&&a()}),ca("destroy",function(){xc||a()}),ca("firstUpdate",function(){n=Gc().pid});var b=yc.indexOf("pid=");b>-1&&(yc=yc.substring(0,b),"&"===yc.slice(-1)&&(yc=yc.slice(0,-1))),setTimeout(function(){k&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){return Ec()===yc?(Ac=!0,void f.close()):void(vc||(wc=!0,f.goTo(Gc().pid),wc=!1))},updateURL:function(){Fc(),wc||(zc?sc=setTimeout(Hc,800):Hc())}}}),e.extend(f,Ga)};return a}),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";var a=function(a,b){var f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,w,x,H,I,c=this,d=!1,e=!0,m=!0,v={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,
!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},y=function(a){if(w)return!0;a=a||window.event,u.timeToIdle&&u.mouseUsed&&!o&&K();for(var d,f,c=a.target||a.srcElement,e=c.getAttribute("class")||"",g=0;g<S.length;g++)d=S[g],d.onTap&&e.indexOf("pswp__"+d.name)>-1&&(d.onTap(),f=!0);if(f){a.stopPropagation&&a.stopPropagation(),w=!0;var h=b.features.isOldAndroid?600:30;x=setTimeout(function(){w=!1},h)}},z=function(){return!a.likelyTouchDevice||u.mouseUsed||screen.width>u.fitControlsWidth},A=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},B=function(){var a=1===u.getNumItemsFn();a!==t&&(A(g,"ui--one-slide",a),t=a)},C=function(){A(l,"share-modal--hidden",m)},D=function(){return m=!m,m?(b.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){m&&C()},300)):(C(),setTimeout(function(){m||b.addClass(l,"pswp__share-modal--fade-in")},30)),m||F(),!1},E=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),!!c.href&&(!!c.hasAttribute("download")||(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),m||D(),!1))},F=function(){for(var b,c,d,e,f,a="",g=0;g<u.shareButtons.length;g++)b=u.shareButtons[g],d=u.getImageURLForShare(b),e=u.getPageURLForShare(b),f=u.getTextForShare(b),c=b.url.replace("{{url}}",encodeURIComponent(e)).replace("{{image_url}}",encodeURIComponent(d)).replace("{{raw_image_url}}",d).replace("{{text}}",encodeURIComponent(f)),a+='<a href="'+c+'" target="_blank" class="pswp__share--'+b.id+'"'+(b.download?"download":"")+">"+b.label+"</a>",u.parseShareButtonOut&&(a=u.parseShareButtonOut(b,a));l.children[0].innerHTML=a,l.children[0].onclick=E},G=function(a){for(var c=0;c<u.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+u.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(I),J=0,o&&c.setIdle(!1)},L=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(I),I=setTimeout(function(){c.setIdle(!0)},u.timeToIdleOutside))},M=function(){u.fullscreenEl&&!b.features.isOldAndroid&&(f||(f=c.getFullscreenAPI()),f?(b.bind(document,f.eventK,c.updateFullscreen),c.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){u.preloaderEl&&(O(!0),p("beforeChange",function(){clearTimeout(s),s=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},u.loadingIndicatorDelay)}),p("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){r!==a&&(A(q,"preloader--active",!a),r=a)},P=function(a){var c=a.vGap;if(z()){var d=u.barsSize;if(u.captionEl&&"auto"===d.bottom)if(i||(i=b.createEl("pswp__caption pswp__caption--fake"),i.appendChild(b.createEl("pswp__caption__center")),g.insertBefore(i,h),b.addClass(g,"pswp__ui--fit")),u.addCaptionHTMLFn(a,i,!0)){var e=i.clientHeight;c.bottom=parseInt(e,10)||44}else c.bottom=d.top;else c.bottom="auto"===d.bottom?0:d.bottom;c.top=d.top}else c.top=c.bottom=0},Q=function(){u.timeToIdle&&p("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),H=setInterval(function(){J++,2===J&&c.setIdle(!0)},u.timeToIdle/2)})},R=function(){p("onVerticalDrag",function(a){e&&a<.95?c.hideControls():!e&&a>=.95&&c.showControls()});var a;p("onPinchClose",function(b){e&&b<.9?(c.hideControls(),a=!0):a&&!e&&b>.9&&c.showControls()}),p("zoomGestureEnded",function(){a=!1,a&&!e&&c.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){h=a}},{name:"share-modal",option:"shareEl",onInit:function(a){l=a},onTap:function(){D()}},{name:"button--share",option:"shareEl",onInit:function(a){k=a},onTap:function(){D()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){j=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){f.isFullscreen()?f.exit():f.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){q=a}}],T=function(){var a,c,d,e=function(e){if(e)for(var f=e.length,g=0;g<f;g++){a=e[g],c=a.className;for(var h=0;h<S.length;h++)d=S[h],c.indexOf("pswp__"+d.name)>-1&&(u[d.option]?(b.removeClass(a,"pswp__element--disabled"),d.onInit&&d.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};e(g.children);var f=b.getChildByClass(g,"pswp__top-bar");f&&e(f.children)};c.init=function(){b.extend(a.options,v,!0),u=a.options,g=b.getChildByClass(a.scrollWrap,"pswp__ui"),p=a.listen,R(),p("beforeChange",c.update),p("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(u.getDoubleTapZoom(!1,a.currItem),b,333)}),p("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),p("bindEvents",function(){b.bind(g,"pswpTap click",y),b.bind(a.scrollWrap,"pswpTap",c.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",c.onMouseOver)}),p("unbindEvents",function(){m||D(),H&&clearInterval(H),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(g,"pswpTap click",y),b.unbind(a.scrollWrap,"pswpTap",c.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",c.onMouseOver),f&&(b.unbind(document,f.eventK,c.updateFullscreen),f.isFullscreen()&&(u.hideAnimationDuration=0,f.exit()),f=null)}),p("destroy",function(){u.captionEl&&(i&&g.removeChild(i),b.removeClass(h,"pswp__caption--empty")),l&&(l.children[0].onclick=null),b.removeClass(g,"pswp__ui--over-close"),b.addClass(g,"pswp__ui--hidden"),c.setIdle(!1)}),u.showAnimationDuration||b.removeClass(g,"pswp__ui--hidden"),p("initialZoomIn",function(){u.showAnimationDuration&&b.removeClass(g,"pswp__ui--hidden")}),p("initialZoomOut",function(){b.addClass(g,"pswp__ui--hidden")}),p("parseVerticalMargin",P),T(),u.shareEl&&k&&l&&(m=!0),B(),Q(),M(),N()},c.setIdle=function(a){o=a,A(g,"ui--idle",a)},c.update=function(){e&&a.currItem?(c.updateIndexIndicator(),u.captionEl&&(u.addCaptionHTMLFn(a.currItem,h),A(h,"caption--empty",!a.currItem.title)),d=!0):d=!1,m||D(),B()},c.updateFullscreen=function(c){c&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(f.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},c.updateIndexIndicator=function(){u.counterEl&&(j.innerHTML=a.getCurrentIndex()+1+u.indexIndicatorSep+u.getNumItemsFn())},c.onGlobalTap=function(d){d=d||window.event;var f=d.target||d.srcElement;if(!w)if(d.detail&&"mouse"===d.detail.pointerType){if(G(f))return void a.close();b.hasClass(f,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?u.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(d.detail.releasePoint))}else if(u.tapToToggleControls&&(e?c.hideControls():c.showControls()),u.tapToClose&&(b.hasClass(f,"pswp__img")||G(f)))return void a.close()},c.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;A(g,"ui--over-close",G(b))},c.hideControls=function(){b.addClass(g,"pswp__ui--hidden"),e=!1},c.showControls=function(){e=!0,d||c.update(),b.removeClass(g,"pswp__ui--hidden")},c.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},c.getFullscreenAPI=function(){var c,b=document.documentElement,d="fullscreenchange";return b.requestFullscreen?c={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:b.mozRequestFullScreen?c={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:b.webkitRequestFullscreen?c={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:b.msRequestFullscreen&&(c={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),c&&(c.enter=function(){return n=u.closeOnScroll,u.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?a.template[this.enterK]():void a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},c.exit=function(){return u.closeOnScroll=n,document[this.exitK]()},c.isFullscreen=function(){return document[this.elementK]}),c}};return a}),function(a){a.fn.photoswipe=function(b){var c=[],d=b,e=function(b){c=[],b.each(function(b,d){c.push({id:b,items:[]}),a(d).find("a").each(function(d,e){var f=a(e),g=f.data("size").split("x");if(2!=g.length)throw SyntaxError("Missing data-size attribute.");f.data("gallery-id",b+1),f.data("photo-id",d);var h={src:e.href,msrc:e.children[0].getAttribute("src"),w:parseInt(g[0],10),h:parseInt(g[1],10),title:f.children("figcaption").html(),el:e};c[b].items.push(h)}),a(d).on("click","a",function(b){b.preventDefault();var c=a(this).data("gallery-id"),d=a(this).data("photo-id");g(c,d)})})},f=function(){var a=window.location.hash.substring(1),b={};if(a.length<5)return b;for(var c=a.split("&"),d=0;d<c.length;d++)if(c[d]){var e=c[d].split("=");e.length<2||(b[e[0]]=e[1])}return b.gid&&(b.gid=parseInt(b.gid,10)),b.hasOwnProperty("pid")?(b.pid=parseInt(b.pid,10),b):b},g=function(b,e){var f=document.querySelectorAll(".pswp")[0],g=c[b-1].items,h={index:e,galleryUID:b,getThumbBoundsFn:function(a){var b=g[a].el.children[0],c=window.pageYOffset||document.documentElement.scrollTop,d=b.getBoundingClientRect();return{x:d.left,y:d.top+c,w:d.width}}};a.extend(h,d);var i=new PhotoSwipe(f,PhotoSwipeUI_Default,g,h);i.init()};e(this);var h=f();return h.pid>0&&h.gid>0&&g(h.gid,h.pid),this}}(jQuery),$(".gallery").photoswipe({bgOpacity:.85,loop:!1,shareEl:!1,closeOnScroll:!1,history:!1,showAnimationDuration:0,hideAnimationDuration:0});